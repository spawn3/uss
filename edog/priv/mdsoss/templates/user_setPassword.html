<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>login</title>



<script type ="text/javascript" language ="javascript" >
        var req; //定义变量，用来创建xmlhttprequest对象


function check(){
			var user=document.getElementById("user").value;
			var pwd=document.getElementById("password").value;	
			var newpwd=document.getElementById("newpassword").value;
			if(user==""||pwd=="")
			{
				document.getElementById("error").innerHTML="用户名和密码不能为空";
				return false;
			}
			if(newpwd=="")
			{
				document.getElementById("error").innerHTML="新密码不能为空";
				return false;			
			}
			return true;
	}



function creatReq() {
			if (!check())
				return false;
			var user=document.getElementById("user").value;
			var pwd=document.getElementById("password").value;	
			var newpwd=document.getElementById("newpassword").value;		
            var url="user_setPassword?user="+user+"&password="+pwd+"&newpassword="+newpwd; //要请求的服务端地址
            if(window.XMLHttpRequest) {
                req=new XMLHttpRequest();
            }
            else if(window.ActiveXObject) {
                req=new ActiveXObject("Microsoft.XMLHttp");
            }
            if(req) {
                req.open("GET",url,true); //与服务端建立连接(请求方式post或get，地址,true表示异步)
                req.onreadystatechange = callback; //指定回调函数
                req.send(null); //发送请求
            }
        }
        
        function callback() {
            if(req.readyState==4) //请求状态为4表示成功
            {
                    document.getElementById("error").innerHTML = req.responseText;
					
               
        	}
		}

    </script>
    
    <style type="text/css">
	td{
		height:30px;
		}
	table{
	border-style:dashed;
	border-color:#69C;
	border-width:thin;
	margin: 0px 10px 10px 10px;
	padding: 20px 20px 10px 20px;
	width:350px;
		}	
	</style>
    
    </head>
    
    <body>

<br />
<br />
<br />
    <br />
        <center >
          <div> 
            <form method="post" action="" >
               <table>
                <div style="color:#FF0000;font-size:11px;" id="error"></div> 
                <tr ><td><label for="user">用 户 名：</label></td>
                <td><input id="user"  type="text"  /></td></tr>
                
                <tr><td><label for="password"> 旧 密 码：</label> </td>
                <td><input id="password" type="password" /></td></tr>
                
                <tr><td><label for="newpassword">新 密 码：</label>  
                <td><input id="newpassword" type="password" /> </td></tr>
                
                <tr><td></td><td align="right"><input value="提交" type="button"  onclick="return creatReq()" /> </td></tr>
                </table>
             </form>
            </div>
        </center>        
     </body>
 </html>